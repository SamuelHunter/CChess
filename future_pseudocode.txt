inCheck(char array scenario)
    for every opponent piece
        for every capture
            if king's square is in there
                return true
    return false

isCheckmate()
    for every one of your own piece
        for every move
            if not inCheck in this scenario
                return false
        for every capture
            if not inCheck in this scenario
                return false
    return true

undo(n = 1)
    save, however
        forget (n) moves: (up to, if there are less moves than n, just remove all and exit normally)
            for iterator = end; iterator >= begin;
                if n == 0
                    break
                if black turn is not empty
                    pop black's last move
                    --n
                else if white turn is not empty
                    pop white's last move
                    --n
                    if white turn is now empty
                        --iterator
    load temporary save
    (optional) delete temporary save        